<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>New Tab</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --accent: #4da6ff;
      --radius: 14px;
      --card-size: 140px;
      --bg-brightness: 0.7;
    }

    body {
      font-family: 'Outfit', sans-serif;
      color: #f0f0f0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }

    /* ── Background ── */
    .bg {
      position: fixed;
      inset: 0;
      z-index: 0;
      background-image: url('wall.jpg');
      background-size: cover;
      background-position: center;
      /* Fallback sunset gradient if wall.png is missing */
      background-color: #1a1a2e;
    }

    .bg-dim {
      position: fixed;
      inset: 0;
      z-index: 1;
      background: rgba(0, 0, 0, calc(1 - var(--bg-brightness)));
      transition: background 0.3s;
      pointer-events: none;
    }

    /* ── Brightness slider (top right) ── */
    .brightness-control {
      position: fixed;
      top: 18px;
      right: 18px;
      z-index: 100;
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(0,0,0,0.35);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 30px;
      padding: 7px 14px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    body:hover .brightness-control,
    .brightness-control:hover {
      opacity: 1;
    }

    .brightness-control svg {
      width: 16px;
      height: 16px;
      fill: rgba(255,255,255,0.7);
      flex-shrink: 0;
    }

    .brightness-control input[type=range] {
      -webkit-appearance: none;
      appearance: none;
      width: 110px;
      height: 4px;
      background: rgba(255,255,255,0.2);
      border-radius: 2px;
      outline: none;
      cursor: pointer;
    }

    .brightness-control input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      box-shadow: 0 0 6px rgba(77,166,255,0.6);
    }

    .brightness-control input[type=range]::-moz-range-thumb {
      width: 14px;
      height: 14px;
      border: none;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
    }

    /* ── Content ── */
    .content {
      position: relative;
      z-index: 10;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #clock {
      font-size: 5rem;
      font-weight: 300;
      letter-spacing: -2px;
      color: #fff;
      text-shadow: 0 2px 24px rgba(0,0,0,0.5);
      margin-bottom: 0.2rem;
      opacity: 0;
      animation: fadeUp 0.6s ease forwards;
    }

    #date {
      font-size: 1rem;
      font-weight: 400;
      color: rgba(255,255,255,0.75);
      margin-bottom: 2.5rem;
      letter-spacing: 0.05em;
      text-shadow: 0 1px 8px rgba(0,0,0,0.6);
      opacity: 0;
      animation: fadeUp 0.6s 0.1s ease forwards;
    }

    /* ── Grid ── */
    .grid-wrapper {
      opacity: 0;
      animation: fadeUp 0.6s 0.2s ease forwards;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(5, var(--card-size));
      gap: 10px;
    }

    .card {
      width: var(--card-size);
      height: var(--card-size);
      background: rgba(20, 15, 10, 0.45);
      backdrop-filter: blur(20px) saturate(1.5);
      -webkit-backdrop-filter: blur(20px) saturate(1.5);
      border: 1px solid rgba(255,255,255,0.08);
      border-top: 2.5px solid var(--accent);
      border-radius: var(--radius);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      cursor: pointer;
      text-decoration: none;
      color: #f0f0f0;
      transition: background 0.2s, transform 0.18s, box-shadow 0.2s;
    }

    .card:hover {
      background: rgba(40, 28, 18, 0.72);
      transform: translateY(-4px);
      box-shadow: 0 16px 40px rgba(0,0,0,0.45), 0 0 0 1px rgba(77,166,255,0.25);
    }

    .card:active {
      transform: translateY(0) scale(0.97);
    }

    .card svg {
      width: 40px;
      height: 40px;
    }

    .card span {
      font-size: 0.8rem;
      font-weight: 500;
      color: rgba(255,255,255,0.78);
      letter-spacing: 0.02em;
    }

    .card:hover span { color: #fff; }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(16px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* ── Error state ── */
    .error-msg {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(200,50,50,0.85);
      color: white;
      font-size: 0.8rem;
      padding: 8px 18px;
      border-radius: 20px;
      z-index: 200;
      display: none;
    }

    @media (max-width: 820px) {
      :root { --card-size: 100px; }
      #clock { font-size: 3.5rem; }
      .grid { grid-template-columns: repeat(3, var(--card-size)); }
      .card svg { width: 30px; height: 30px; }
    }
  </style>
</head>
<body>

  <div class="bg" id="bg"></div>
  <div class="bg-dim" id="bgDim"></div>

  <!-- Brightness Control -->
  <div class="brightness-control">
    <svg viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-12.37l-1.06 1.06a.996.996 0 0 0 0 1.41c.39.39 1.03.39 1.41 0l1.06-1.06a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0zM7.05 18.36l-1.06 1.06a.996.996 0 0 0 0 1.41c.39.39 1.03.39 1.41 0l1.06-1.06a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0z"/></svg>
    <input type="range" id="brightnessSlider" min="10" max="100" value="70" />
  </div>

  <div class="content">
    <div id="clock">00:00</div>
    <div id="date">Loading...</div>
    <div class="grid-wrapper">
      <div class="grid" id="grid"></div>
    </div>
  </div>

  <div class="error-msg" id="errorMsg"></div>

  <script>
    // ── SVG icon library ─────────────────────────────────────────
    const ICONS = {
      youtube:   `<svg viewBox="0 0 24 24" fill="white"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>`,

      chatgpt:   `<svg viewBox="0 0 24 24" fill="white"><path d="M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.515 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.032.065L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.872zm16.597 3.855l-5.833-3.387L15.119 7.2a.076.076 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z"/></svg>`,

      slides:    `<svg viewBox="0 0 24 24" fill="white"><path d="M19 3H5C3.9 3 3 3.9 3 5v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 14H6V7h12v10zm-2-8H8v2h8V9zm0 4H8v2h8v-2z"/></svg>`,

      utopia:    `<svg viewBox="0 0 24 24" fill="white"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8zm3-11.5c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zM6.5 17c.828-2.314 2.958-4 5.5-4s4.672 1.686 5.5 4h-11z"/></svg>`,

      music:     `<svg viewBox="0 0 24 24" fill="white"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>`,

      morning:   `<svg viewBox="0 0 24 24" fill="white"><path d="M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zm0 5h-2V5h2v3zM4 19h16v2H4z"/></svg>`,

      documents: `<svg viewBox="0 0 24 24" fill="white"><path d="M14 2H6C4.9 2 4 2.9 4 4v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>`,

      google:    `<svg viewBox="0 0 24 24" fill="white"><path d="M21.35 11.1H12v2.8h5.35C16.83 16.3 14.66 18 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.48 0 2.83.54 3.87 1.43l2.1-2.1A9.93 9.93 0 0 0 12 4C7.03 4 3 8.03 3 13s4.03 9 9 9c5.22 0 8.65-3.67 8.65-8.83 0-.6-.05-1.17-.15-1.73z"/></svg>`,

      inferalis: `<svg viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.49 0 2.87.43 4.03 1.17L5.17 16.03A7.949 7.949 0 0 1 4 12c0-4.41 3.59-8 8-8zm0 14c-1.49 0-2.87-.43-4.03-1.17l10.86-10.86C19.57 9.13 20 10.51 20 12c0 4.41-3.59 8-8 8z"/></svg>`,

      whatsapp:  `<svg viewBox="0 0 24 24" fill="white"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/></svg>`,

      github:    `<svg viewBox="0 0 24 24" fill="white"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>`,

      drive:     `<svg viewBox="0 0 24 24" fill="white"><path d="M4.65 19.505l1.333-2.31H22l-1.333 2.31zm3.24-5.618L6.555 11.58 14.373 2l1.335 2.307zm11.363 3.308H8.43l-3.78-6.553L8.43 4.647h10.822l3.78 6.553z"/></svg>`,

      gmail:     `<svg viewBox="0 0 24 24" fill="white"><path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"/></svg>`,

      telegram:  `<svg viewBox="0 0 24 24" fill="white"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>`,

      gemini:    `<svg viewBox="0 0 24 24" fill="white"><path d="M12 24A14.304 14.304 0 0 0 0 12 14.304 14.304 0 0 0 12 0a14.305 14.305 0 0 0 12 12 14.305 14.305 0 0 0-12 12z"/></svg>`,

      claude:    `<svg viewBox="0 0 24 24" fill="white"><path d="M4.709 15.955l4.72-2.647.08-.23-.08-.23-4.72-2.648-.23.08-.08.23.08.23 3.36 1.888-3.36 1.888-.08.23.08.23.23.08zm14.582-7.91l-4.72 2.648-.08.23.08.23 4.72 2.647.23-.08.08-.23-.08-.23-3.36-1.888 3.36-1.888.08-.23-.08-.23-.23-.08zM14.661 4l-3.13 9.248.08.23h.23l.23-.08L15.2 4.31l-.08-.23h-.23L14.661 4zM8.23 14.522l3.13 9.248.23.08h.23l.08-.23-3.13-9.248-.23-.08h-.23l-.08.23z"/></svg>`,

      todoist:   `<svg viewBox="0 0 24 24" fill="white"><path d="M3 10.417c0-.44.36-.8.8-.8h3.6c.44 0 .8.36.8.8v.367l-1.99 1.117-3.21-1.8v.316zm0 3.6c0-.44.36-.8.8-.8h3.6c.44 0 .8.36.8.8v.366l-1.99 1.117-3.21-1.8v.317zm0 3.6c0-.44.36-.8.8-.8h3.6c.44 0 .8.36.8.8v1.6c0 .44-.36.8-.8.8H3.8c-.44 0-.8-.36-.8-.8v-1.6zM9.6 9.617c0-.44.36-.8.8-.8h9.8c.44 0 .8.36.8.8v1.6c0 .44-.36.8-.8.8H10.4c-.44 0-.8-.36-.8-.8v-1.6zm0 3.6c0-.44.36-.8.8-.8h9.8c.44 0 .8.36.8.8v1.6c0 .44-.36.8-.8.8H10.4c-.44 0-.8-.36-.8-.8v-1.6zm0 3.6c0-.44.36-.8.8-.8h9.8c.44 0 .8.36.8.8v1.6c0 .44-.36.8-.8.8H10.4c-.44 0-.8-.36-.8-.8v-1.6zM3 6.817c0-.44.36-.8.8-.8h16.4c.44 0 .8.36.8.8v1.6c0 .44-.36.8-.8.8H3.8c-.44 0-.8-.36-.8-.8v-1.6z"/></svg>`,

      // Generic fallback icon
      default:   `<svg viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>`
    };

    // ── Load links from links.json ────────────────────────────────
    async function loadLinks() {
      try {
        const res = await fetch('links.json?v=' + Date.now());
        if (!res.ok) throw new Error('links.json not found');
        return await res.json();
      } catch (e) {
        showError('Could not load links.json — make sure it exists in the same folder.');
        return [];
      }
    }

    function showError(msg) {
      const el = document.getElementById('errorMsg');
      el.textContent = msg;
      el.style.display = 'block';
      setTimeout(() => el.style.display = 'none', 6000);
    }

    // ── Build grid ────────────────────────────────────────────────
    function buildGrid(links) {
      const COLS = 5;
      const grid = document.getElementById('grid');
      grid.innerHTML = '';

      links.forEach((link, i) => {
        const iconKey = (link.icon || '').toLowerCase();
        const iconSVG = ICONS[iconKey] || ICONS.default;

        const a = document.createElement('a');
        a.className = 'card';
        a.href = link.url;
        a.target = '_self';
        a.innerHTML = iconSVG + `<span>${link.label}</span>`;
        grid.appendChild(a);
      });

      // Fill remainder so grid rows are full
      const remainder = links.length % COLS;
      if (remainder !== 0) {
        const empties = COLS - remainder;
        for (let i = 0; i < empties; i++) {
          const d = document.createElement('div');
          d.className = 'card';
          d.style.opacity = '0';
          d.style.pointerEvents = 'none';
          grid.appendChild(d);
        }
      }
    }

    // ── Brightness slider ─────────────────────────────────────────
    const slider = document.getElementById('brightnessSlider');
    const bgDim = document.getElementById('bgDim');

    function applyBrightness(val) {
      const brightness = val / 100;
      document.documentElement.style.setProperty('--bg-brightness', brightness);
      localStorage.setItem('bg-brightness', val);
    }

    // Load saved brightness
    const savedBrightness = localStorage.getItem('bg-brightness');
    if (savedBrightness !== null) {
      slider.value = savedBrightness;
      applyBrightness(savedBrightness);
    }

    slider.addEventListener('input', () => applyBrightness(slider.value));

    // ── Clock ─────────────────────────────────────────────────────
    function updateClock() {
      const now = new Date();
      const h = String(now.getHours()).padStart(2, '0');
      const m = String(now.getMinutes()).padStart(2, '0');
      document.getElementById('clock').textContent = `${h}:${m}`;
      const days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
      const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
      document.getElementById('date').textContent =
        `${days[now.getDay()]}, ${months[now.getMonth()]} ${now.getDate()}`;
    }
    updateClock();
    setInterval(updateClock, 1000);

    // ── Init ──────────────────────────────────────────────────────
    loadLinks().then(buildGrid);
  </script>
</body>
</html>
